$pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"]=function(l){if($pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"].__was_initialized__)return $pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"];"undefined"!=typeof $pyjs.loaded_modules["pyjamas.Canvas"]&&$pyjs.loaded_modules["pyjamas.Canvas"].__was_initialized__||$p.___import___("pyjamas.Canvas",null);var f=$pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"];f.__repr__=function(){return"<module: pyjamas.Canvas.ImageLoader>"};f.__was_initialized__=
!0;if(null===l||"undefined"==typeof l)l="pyjamas.Canvas.ImageLoader";f.__name__=l;$pyjs.loaded_modules["pyjamas.Canvas"].ImageLoader=$pyjs.loaded_modules["pyjamas.Canvas.ImageLoader"];f.DOM=$p.___import___("pyjamas.DOM","pyjamas.Canvas",null,!1);f.Image=$p.___import___("pyjamas.ui.Image.Image","pyjamas.Canvas",null,!1);f.Event=$p.___import___("pyjamas.ui.Event","pyjamas.Canvas",null,!1);f.imageLoaders=$p.list([]);f.ImageLoader=function(){var b={},h;b.__module__="pyjamas.Canvas.ImageLoader";h=$pyjs__bind_method2("__init__",
function(a){a=!0===this.__is_instance__?this:a;var b,c;a.__is_instance__&&"function"==typeof a.__setattr__?a.__setattr__("images",$p.list([])):$p.setattr(a,"images",$p.list([]));a.__is_instance__&&"function"==typeof a.__setattr__?a.__setattr__("callBack",null):$p.setattr(a,"callBack",null);a.__is_instance__&&"function"==typeof a.__setattr__?a.__setattr__("loadedImages",0):$p.setattr(a,"loadedImages",0);a.__is_instance__&&"function"==typeof a.__setattr__?a.__setattr__("totalImages",0):$p.setattr(a,
"totalImages",0);a.__is_instance__&&"function"==typeof a.__setattr__?a.__setattr__("onImageLoad",null==(b=(c=a).onLoad)||c.__is_instance__&&"function"==typeof b||"function"==typeof b.__get__?$p.getattr(c,"onLoad"):a.onLoad):$p.setattr(a,"onImageLoad",null==(b=(c=a).onLoad)||c.__is_instance__&&"function"==typeof b||"function"==typeof b.__get__?$p.getattr(c,"onLoad"):a.onLoad);return null},1,[null,null,["self"]]);b.__init__=h;h=$pyjs__bind_method2("addHandle",function(a,b){if(!0===this.__is_instance__)var c=
this;else c=a,a=b;c.totalImages+=1;c.images.append(a);return null},1,[null,null,["self"],["img"]]);b.addHandle=h;h=$pyjs__bind_method2("dispatchIfComplete",function(a){a=!0===this.__is_instance__?this:a;var b,c,e,d,g;if(null===(d=(null===(g=c=null!==(null==(b=a.callBack)||a.__is_instance__&&"function"==typeof b||"function"==typeof b.__get__?$p.getattr(a,"callBack"):a.callBack))||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?
0<g.__len__():1:1)?a.isAllLoaded():c)||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1)a.callBack.onImagesLoaded(null==(e=a.images)||a.__is_instance__&&"function"==typeof e||"function"==typeof e.__get__?$p.getattr(a,"images"):a.images),f.imageLoaders.remove(a);return null},1,[null,null,["self"]]);b.dispatchIfComplete=h;h=$pyjs__bind_method2("finalize",function(a,b){if(!0===this.__is_instance__)var c=this;else c=
a,a=b;c.__is_instance__&&"function"==typeof c.__setattr__?c.__setattr__("callBack",a):$p.setattr(c,"callBack",a);return null},1,[null,null,["self"],["cb"]]);b.finalize=h;h=$pyjs__bind_method2("incrementLoadedImages",function(a){a=!0===this.__is_instance__?this:a;a.loadedImages+=1;return null},1,[null,null,["self"]]);b.incrementLoadedImages=h;h=$pyjs__bind_method2("isAllLoaded",function(a){a=!0===this.__is_instance__?this:a;var b,c,e,d;return(e=null==(d=a.loadedImages)||a.__is_instance__&&"function"==
typeof d||"function"==typeof d.__get__?$p.getattr(a,"loadedImages"):a.loadedImages)===(c=null==(b=a.totalImages)||a.__is_instance__&&"function"==typeof b||"function"==typeof b.__get__?$p.getattr(a,"totalImages"):a.totalImages)&&null===e?!0:null===e?!1:null===c?!1:"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.__cmp__?"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.__cmp__?e==c:0===c.__cmp__(e):0===e.__cmp__(c)},1,[null,null,["self"]]);b.isAllLoaded=h;h=$pyjs__bind_method2("prepareImage",
function(a,b){var c=!0===this.__is_instance__?this:a,e,d,g;d=f.Image();d.__is_instance__&&"function"==typeof d.__setattr__?d.__setattr__("__isLoaded",!1):$p.setattr(d,"__isLoaded",!1);d.addLoadListener(c);f.DOM.setEventListener(d.getElement(),d);f.DOM.sinkEvents(d.getElement(),null==(e=(g=f.Event).ONLOAD)||g.__is_instance__&&"function"==typeof e||"function"==typeof e.__get__?$p.getattr(g,"ONLOAD"):f.Event.ONLOAD);return d},1,[null,null,["self"],["url"]]);b.prepareImage=h;h=$pyjs__bind_method2("onLoad",
function(a,b){if(!0===this.__is_instance__)var c=this;else c=a,a=b;var e,d,g,f;if(null===(d=!(null===(e=null==(f=(g=a).__isLoaded)||g.__is_instance__&&"function"==typeof f||"function"==typeof f.__get__?$p.getattr(g,"__isLoaded"):a.__isLoaded)||!1===e||0===e||""===e?0:"object"==typeof e?"function"==typeof e.__nonzero__?e.__nonzero__():"function"==typeof e.__len__?0<e.__len__():1:1))||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?
0<d.__len__():1:1)a.__is_instance__&&"function"==typeof a.__setattr__?a.__setattr__("__isLoaded",!0):$p.setattr(a,"__isLoaded",!0),c.incrementLoadedImages(),a.removeLoadListener(c);c.dispatchIfComplete();return a},1,[null,null,["self"],["img"]]);b.onLoad=h;h=Array(pyjslib.object);var k=$p.dict(),n;for(n in b)k.__setitem__(n,b[n]);return $p._create_class("ImageLoader",$p.tuple(h),k)}();f.loadImages=function(b,h){var k,n,a,p,c,e,d,g,l,s,q,m,r,t;a=f.ImageLoader();k=$p.range(null===b?0:"undefined"!=typeof b.__array?
b.__array.length:"function"==typeof b.__len__?b.__len__():"undefined"!=typeof b.length?b.length:$p.len(b));"undefined"!=typeof(c=k.__array)?r=0:(k=k.__iter__(),r="undefined"!=typeof(c=k.__array)?0:"function"==typeof k.$genfunc?1:-1);for(t=0;"undefined"!=typeof(e=r?0<r?k.next(!0,!1):$p.wrapped_next(k):c[t++]);)a.addHandle(a.prepareImage("undefined"!=typeof(m=b).__array?"undefined"!=typeof m.__array[d=e]?m.__array[d]:m.__getitem__(d):m.__getitem__(e)));a.finalize(h);f.imageLoaders.append(a);c=$p.range(null===
b?0:"undefined"!=typeof b.__array?b.__array.length:"function"==typeof b.__len__?b.__len__():"undefined"!=typeof b.length?b.length:$p.len(b));"undefined"!=typeof(m=c.__array)?k=0:(c=c.__iter__(),k="undefined"!=typeof(m=c.__array)?0:"function"==typeof c.$genfunc?1:-1);for(d=0;"undefined"!=typeof(e=k?0<k?c.next(!0,!1):$p.wrapped_next(c):m[d++]);)("undefined"!=typeof(q=null==(g=(s=a).images)||s.__is_instance__&&"function"==typeof g||"function"==typeof g.__get__?$p.getattr(s,"images"):a.images).__array?
"undefined"!=typeof q.__array[l=e]?q.__array[l]:q.__getitem__(l):q.__getitem__(e)).setUrl("undefined"!=typeof(p=b).__array?"undefined"!=typeof p.__array[n=e]?p.__array[n]:p.__getitem__(n):p.__getitem__(e));return null};f.loadImages.__name__="loadImages";f.loadImages.__bind_type__=0;f.loadImages.__args__=[null,null,["urls"],["cb"]];return this};
