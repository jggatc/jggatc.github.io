$pyjs.loaded_modules["pyjamas.ui.KeyboardListener"]=function(l){if($pyjs.loaded_modules["pyjamas.ui.KeyboardListener"].__was_initialized__)return $pyjs.loaded_modules["pyjamas.ui.KeyboardListener"];"undefined"!=typeof $pyjs.loaded_modules["pyjamas.ui"]&&$pyjs.loaded_modules["pyjamas.ui"].__was_initialized__||$p.___import___("pyjamas.ui",null);var a=$pyjs.loaded_modules["pyjamas.ui.KeyboardListener"];a.__repr__=function(){return"<module: pyjamas.ui.KeyboardListener>"};a.__was_initialized__=!0;if(null===
l||"undefined"==typeof l)l="pyjamas.ui.KeyboardListener";a.__name__=l;$pyjs.loaded_modules["pyjamas.ui"].KeyboardListener=$pyjs.loaded_modules["pyjamas.ui.KeyboardListener"];a.DOM=$p.___import___("pyjamas.DOM","pyjamas.ui",null,!1);a.Event=$p.___import___("pyjamas.ui.Event","pyjamas.ui",null,!1);a.KEY_ALT=18;a.KEY_BACKSPACE=8;a.KEY_CTRL=17;a.KEY_DELETE=46;a.KEY_DOWN=40;a.KEY_END=35;a.KEY_ENTER=13;a.KEY_ESCAPE=27;a.KEY_HOME=36;a.KEY_LEFT=37;a.KEY_PAGEDOWN=34;a.KEY_PAGEUP=33;a.KEY_RIGHT=39;a.KEY_SHIFT=
16;a.KEY_TAB=9;a.KEY_UP=38;a.KEYS=$p.list([a.KEY_ALT,a.KEY_BACKSPACE,a.KEY_CTRL,a.KEY_DELETE,a.KEY_DOWN,a.KEY_END,a.KEY_ENTER,a.KEY_ESCAPE,a.KEY_HOME,a.KEY_LEFT,a.KEY_PAGEDOWN,a.KEY_PAGEUP,a.KEY_RIGHT,a.KEY_SHIFT,a.KEY_TAB,a.KEY_UP]);a.MODIFIER_ALT=4;a.MODIFIER_CTRL=2;a.MODIFIER_SHIFT=1;a.getKeyboardModifiers=function(e){var f,b,c,d,g,k;k=f=b=0;if(null===(g=a.DOM.eventGetShiftKey(e))||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?
0<g.__len__():1:1)b=a.MODIFIER_SHIFT;if(null===(c=a.DOM.eventGetCtrlKey(e))||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==typeof c.__len__?0<c.__len__():1:1)f=a.MODIFIER_CTRL;if(null===(d=a.DOM.eventGetAltKey(e))||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1)k=a.MODIFIER_ALT;return b|f|k};a.getKeyboardModifiers.__name__="getKeyboardModifiers";a.getKeyboardModifiers.__bind_type__=
0;a.getKeyboardModifiers.__args__=[null,null,["event"]];a.fireKeyboardEvent=function(e,f,b){var c,d,g,k,m;m=a.getKeyboardModifiers(b);k=a.DOM.eventGetKeyCode(b);b=a.DOM.eventGetType(b);if(null===(d="keydown"===b&&null===b?!0:null===b?!1:"object"!=typeof b&&"function"!=typeof b||"function"!=typeof b.__cmp__?"keydown"==b:0===b.__cmp__("keydown"))||!1===d||0===d||""===d?0:"object"==typeof d?"function"==typeof d.__nonzero__?d.__nonzero__():"function"==typeof d.__len__?0<d.__len__():1:1)for(c=e,"undefined"!=
typeof(d=c.__array)?g=0:(c=c.__iter__(),g="undefined"!=typeof(d=c.__array)?0:"function"==typeof c.$genfunc?1:-1),b=0;"undefined"!=typeof(e=g?0<g?c.next(!0,!1):$p.wrapped_next(c):d[b++]);)e.onKeyDown(f,k,m);else if(null===(g="keyup"===b&&null===b?!0:null===b?!1:"object"!=typeof b&&"function"!=typeof b||"function"!=typeof b.__cmp__?"keyup"==b:0===b.__cmp__("keyup"))||!1===g||0===g||""===g?0:"object"==typeof g?"function"==typeof g.__nonzero__?g.__nonzero__():"function"==typeof g.__len__?0<g.__len__():
1:1)for(d=e,"undefined"!=typeof(b=d.__array)?c=0:(d=d.__iter__(),c="undefined"!=typeof(b=d.__array)?0:"function"==typeof d.$genfunc?1:-1),g=0;"undefined"!=typeof(e=c?0<c?d.next(!0,!1):$p.wrapped_next(d):b[g++]);)e.onKeyUp(f,k,m);else if(null===(c="keypress"===b&&null===b?!0:null===b?!1:"object"!=typeof b&&"function"!=typeof b||"function"!=typeof b.__cmp__?"keypress"==b:0===b.__cmp__("keypress"))||!1===c||0===c||""===c?0:"object"==typeof c?"function"==typeof c.__nonzero__?c.__nonzero__():"function"==
typeof c.__len__?0<c.__len__():1:1)for(b=e,"undefined"!=typeof(g=b.__array)?c=0:(b=b.__iter__(),c="undefined"!=typeof(g=b.__array)?0:"function"==typeof b.$genfunc?1:-1),d=0;"undefined"!=typeof(e=c?0<c?b.next(!0,!1):$p.wrapped_next(b):g[d++]);)e.onKeyPress(f,k,m);return null};a.fireKeyboardEvent.__name__="fireKeyboardEvent";a.fireKeyboardEvent.__bind_type__=0;a.fireKeyboardEvent.__args__=[null,null,["listeners"],["sender"],["event"]];a.KEYBOARD_EVENTS=$p.list(["keydown","keyup","keypress"]);a.KeyboardHandler=
function(){var e={},f;e.__module__="pyjamas.ui.KeyboardListener";f=$pyjs__bind_method2("__init__",function(d){d=!0===this.__is_instance__?this:d;var b,c;d.__is_instance__&&"function"==typeof d.__setattr__?d.__setattr__("_keyboardListeners",$p.list([])):$p.setattr(d,"_keyboardListeners",$p.list([]));d.sinkEvents(null==(b=(c=a.Event).KEYEVENTS)||c.__is_instance__&&"function"==typeof b||"function"==typeof b.__get__?$p.getattr(c,"KEYEVENTS"):a.Event.KEYEVENTS);return null},1,[null,null,["self"]]);e.__init__=
f;f=$pyjs__bind_method2("onBrowserEvent",function(d,b){if(!0===this.__is_instance__)var c=this;else c=d,d=b;var e,f,h,l;l=a.DOM.eventGetType(d);(null===(h=$p.list(["keydown","keyup","keypress"]).__contains__(l))||!1===h||0===h||""===h?0:"object"==typeof h?"function"==typeof h.__nonzero__?h.__nonzero__():"function"==typeof h.__len__?0<h.__len__():1:1)&&a.fireKeyboardEvent(null==(e=(f=c)._keyboardListeners)||f.__is_instance__&&"function"==typeof e||"function"==typeof e.__get__?$p.getattr(f,"_keyboardListeners"):
c._keyboardListeners,c,d);return null},1,[null,null,["self"],["event"]]);e.onBrowserEvent=f;f=$pyjs__bind_method2("addKeyboardListener",function(a,b){if(!0===this.__is_instance__)var c=this;else c=a,a=b;c._keyboardListeners.append(a);return null},1,[null,null,["self"],["listener"]]);e.addKeyboardListener=f;f=$pyjs__bind_method2("removeKeyboardListener",function(a,b){if(!0===this.__is_instance__)var c=this;else c=a,a=b;c._keyboardListeners.remove(a);return null},1,[null,null,["self"],["listener"]]);
e.removeKeyboardListener=f;f=$pyjs__bind_method2("onKeyDown",function(a,b,c,e){return null},1,[null,null,["self"],["sender"],["keycode"],["modifiers"]]);e.onKeyDown=f;f=$pyjs__bind_method2("onKeyUp",function(a,b,c,e){return null},1,[null,null,["self"],["sender"],["keycode"],["modifiers"]]);e.onKeyUp=f;f=$pyjs__bind_method2("onKeyPress",function(a,b,c,e){return null},1,[null,null,["self"],["sender"],["keycode"],["modifiers"]]);e.onKeyPress=f;f=Array(pyjslib.object);var b=$p.dict(),c;for(c in e)b.__setitem__(c,
e[c]);return $p._create_class("KeyboardHandler",$p.tuple(f),b)}();return this};
